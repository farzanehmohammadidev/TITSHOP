{"version":3,"sources":["turbopack:///[project]/app/form.module.css [app-ssr] (css module)","turbopack:///[project]/app/auth/log/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"formBox\": \"form-module__mIo5rq__formBox\",\n  \"formContainer\": \"form-module__mIo5rq__formContainer\",\n  \"inputField\": \"form-module__mIo5rq__inputField\",\n  \"submitBtn\": \"form-module__mIo5rq__submitBtn\",\n});\n","\"use client\";\r\nimport React, { useContext } from \"react\";\r\nimport styles from \"@/app/form.module.css\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport IsLoginContext from \"@/context/IsLogin/isLogin\";\r\n\r\nconst Log: React.FC = () => {\r\n  const { islog, setIslog } = useContext(IsLoginContext);\r\n  const router = useRouter();\r\n  const loginHandler = async (\r\n    e: React.FormEvent<HTMLFormElement>\r\n  ): Promise<void> => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    const email = form.email.value;\r\n    const password = form.password.value;\r\n\r\n    if (!email || !password) {\r\n      alert(\"لطفاً ایمیل و پسورد خود را وارد کنید\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const res = await fetch(\"/api/auth/log\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n        credentials: \"include\",\r\n      });\r\n      \r\n      const data = await res.json();\r\n      \r\n      if (data.success) {\r\n        router.push(\"/\");\r\n      } else {\r\n        alert(\"ایمیل یا رمز اشتباه است\");\r\n      }\r\n      \r\n         const resToken = await fetch(\"/api/getToken\");\r\n         const token = await resToken.json();\r\n         if (token) return setIslog(true);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"خطا در ورود\");\r\n    }\r\n  };\r\nconsole.log(islog);\r\n\r\n  return (\r\n    <form className={styles.formContainer} onSubmit={loginHandler}>\r\n      <div className={styles.formBox}>\r\n        <input\r\n          className={styles.inputField}\r\n          type=\"text\"\r\n          placeholder=\"ایمیل خود را وارد کنید\"\r\n          name=\"email\"\r\n        />\r\n        <input\r\n          className={styles.inputField}\r\n          type=\"password\"\r\n          placeholder=\"پسوورد خود را وارد کنید\"\r\n          name=\"password\"\r\n        />\r\n        <button className={styles.submitBtn} type=\"submit\">\r\n          ورود\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Log;\r\n"],"names":[],"mappings":"0BAAA,EAAA,CAAA,CAAA,CACA,QAAA,+BACA,cAAA,qCACA,WAAA,kCACA,UAAA,gCACA,mECJA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,aAEsB,KACpB,GAAM,OAAE,CAAK,UAAE,CAAQ,CAAE,CAAG,CAAA,CAgEf,CAhEe,EAAA,UAAA,AAAU,EAAC,EAAA,OAAc,EAC/C,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,MACnB,IAEA,EAAE,cAAc,GAChB,IAAM,EAAO,EAAE,aAAa,CACtB,EAAQ,EAAK,KAAK,CAAC,KAAK,CACxB,EAAW,EAAK,QAAQ,CAAC,KAAK,CAEpC,GAAI,CAAC,GAAS,CAAC,EAAU,YACvB,MAAM,wCAIR,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,gBAAiB,CACvC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,OAAE,WAAO,CAAS,GACvC,YAAa,SACf,EAII,EAFS,MAAM,EAAI,IAAI,EAAA,EAElB,OAAO,CACd,CADgB,CACT,IAAI,CAAC,KAEZ,MAAM,2BAGL,IAAM,EAAW,MAAM,MAAM,iBAE7B,GADc,CACV,KADgB,EAAS,IAAI,GACtB,OAAO,GAAS,EAChC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,GACd,MAAM,cACR,CACF,EAGA,OAFF,QAAQ,GAAG,CAAC,GAGR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAA,OAAM,CAAC,aAAa,CAAE,SAAU,WAC/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,OAAO,WAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAW,EAAA,OAAM,CAAC,UAAU,CAC5B,KAAK,OACL,YAAY,yBACZ,KAAK,UAEP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAW,EAAA,OAAM,CAAC,UAAU,CAC5B,KAAK,WACL,YAAY,0BACZ,KAAK,aAEP,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAW,EAAA,OAAM,CAAC,SAAS,CAAE,KAAK,kBAAS,aAM3D"}