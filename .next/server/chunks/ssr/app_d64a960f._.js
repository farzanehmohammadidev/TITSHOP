module.exports=[20045,a=>{a.v({card:"ProductCard-module__LiIe2G__card",cardButton:"ProductCard-module__LiIe2G__cardButton",cardDesc:"ProductCard-module__LiIe2G__cardDesc",cardImage:"ProductCard-module__LiIe2G__cardImage",cardPrice:"ProductCard-module__LiIe2G__cardPrice",grid:"ProductCard-module__LiIe2G__grid"})},27774,a=>{"use strict";a.s(["default",()=>g],27774);var b=a.i(87924),c=a.i(20045),d=a.i(71987);let e=({_id:a,name:e,image:f,price:g,email:h,desc:i})=>{let j=async()=>{try{let b=await fetch("/api/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({productId:a})}),c=await b.json();b.ok?window.location.reload():alert(c.error||"خطایی در حذف محصول رخ داد")}catch(a){console.error("خطا در حذف محصول:",a),alert("مشکلی پیش آمد، لطفاً دوباره تلاش کنید.")}finally{}},k=async()=>{try{let b=await fetch("/api/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,productId:a})}),c=await b.json();console.log(c),b.ok?window.location.reload():alert(c.error||"خطا در انتقال")}catch(a){console.error(a)}finally{}};return(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:`${c.default.card} flex flex-col justify-center`,children:[(0,b.jsx)(d.default,{width:1200,height:400,className:`${c.default.cardImage} , w-full h-auto`,src:f,alt:e,draggable:!1}),(0,b.jsx)("h4",{className:`${c.default.cardDesc} fa en`,children:(0,b.jsx)("span",{className:"text-[20px]",children:i})}),(0,b.jsx)("hr",{}),(0,b.jsxs)("div",{className:`${c.default.cardPrice} , flex items-center justify-between`,children:[(0,b.jsx)("span",{className:"fa text-md",children:"قیمت: "}),(0,b.jsxs)("span",{className:"fa text-md",children:[g," "]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("div",{className:"flex  w-[8 0%]",style:{margin:"50px 0"},children:[(0,b.jsx)("button",{className:"bg-red-600 fa text-white",style:{padding:"1px 5px"},onClick:j,children:"حذف"}),(0,b.jsx)("button",{className:"bg-green-600 fa text-white",style:{padding:"1px 5px"},onClick:k,children:"ثبت خرید"})]})})]})})};var f=a.i(72131);let g=function(){let[a,c]=(0,f.useState)([]);return(0,f.useEffect)(()=>{!async function(){let a=await fetch("/api/shop",{cache:"no-store"});c((await a.json())[0].cart)}()},[]),(0,b.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4",children:a.map(a=>(0,b.jsx)("li",{children:(0,b.jsx)(e,{...a})},a._id))})}}];

//# sourceMappingURL=app_d64a960f._.js.map